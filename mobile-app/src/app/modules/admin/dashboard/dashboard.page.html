<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Dashboard</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-spinner *ngIf="cargando" class="spinner-center"></ion-spinner>

  <!-- INGRESOS MENSUALES -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Ingresos Mensuales</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let ingreso of ingresosMensuales">
          Mes {{ ingreso.mes }}/{{ ingreso.ano }} - ${{ ingreso.total }}
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

  <!-- CREAR NUEVO CLIENTE -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Crear Nuevo Cliente</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label position="floating">Nombre</ion-label>
        <ion-input [(ngModel)]="nuevoCliente.nombre"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Apellido</ion-label>
        <ion-input [(ngModel)]="nuevoCliente.apellido"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Celular</ion-label>
        <ion-input [(ngModel)]="nuevoCliente.telefono"></ion-input>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Monto Inicial</ion-label>
        <ion-input type="number" [(ngModel)]="nuevoCliente.monto"></ion-input>
      </ion-item>
      <ion-button expand="full" color="warning" (click)="crearCliente()">Crear Cliente</ion-button>
    </ion-card-content>
  </ion-card>

  <!-- REGISTRAR PAGO -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Registrar Pago</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <ion-item>
        <ion-label>Cliente</ion-label>
        <ion-select [(ngModel)]="pagoCliente.clienteId">
          <ion-select-option *ngFor="let c of clientes" [value]="c.id">
            {{ c.nombre }} {{ c.apellido }} - {{ c.estado_cuota }}
          </ion-select-option>
        </ion-select>
      </ion-item>
      <ion-item>
        <ion-label position="floating">Monto</ion-label>
        <ion-input type="number" [(ngModel)]="pagoCliente.monto"></ion-input>
      </ion-item>
      <ion-button expand="full" color="warning" (click)="registrarPago()">Registrar Pago</ion-button>
    </ion-card-content>
  </ion-card>

  <!-- LISTA DE CLIENTES -->
  <ion-card>
    <ion-card-header>
      <ion-card-title>Clientes</ion-card-title>
      <ion-item>
        <ion-input placeholder="Buscar cliente..." [(ngModel)]="filtroCliente"></ion-input>
      </ion-item>
    </ion-card-header>
    <ion-card-content>
      <ion-list>
        <ion-item *ngFor="let cliente of clientesFiltrados()">
          {{ cliente.nombre }} {{ cliente.apellido }} - {{ cliente.estado_cuota }}
          <ion-button slot="end" color="success" fill="outline" (click)="enviarWhatsApp(cliente)">
            ðŸ“± WhatsApp
          </ion-button>
        </ion-item>
      </ion-list>
    </ion-card-content>
  </ion-card>

</ion-content>